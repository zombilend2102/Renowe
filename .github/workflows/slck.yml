name: Update slck TV

on:
  schedule:
    - cron: '*/5 * * * *' # Her 5 dakikada bir çalışır
  workflow_dispatch: # Elle tetiklemek için

jobs:
  build:
    runs-on: ubuntu-latest
    
    # Otomatik Commit/Push işleminin çalışması için izinlerin verilmesi kritik.
    permissions:
      contents: write 

    steps:
    - name: Depoyu Çek (Checkout)
      uses: actions/checkout@v4 # Güncel v4 önerilir

    - name: Python Kurulumu
      uses: actions/setup-python@v5 # Güncel v5 önerilir
      with:
        python-version: '3.9'

    - name: Gereklilikleri Yükle
      run: |
        python -m pip install --upgrade pip
        pip install requests

    - name: Scripti Çalıştır (slck.py)
      run: python slck.py

    - name: Değişiklikleri Otomatik Commit Yap
      uses: stefanzweifel/git-auto-commit-action@v5
      with:
        commit_message: "Kanallar Güncellendi (Otomatik Commit) $(date)"
        # HATA DÜZELTİLDİ: 'files' yerine 'file_pattern' kullanıldı.
        file_pattern: slck.html 
        # Depoda değişiklik olmasa bile, Action'ın başarılı sayılması için eklenebilir.
        # skip_dirty_check: true
